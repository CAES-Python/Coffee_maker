#: import MeshLinePlot kivy.garden.graph.MeshLinePlot
<Runner>:
	#Handling the gesture event.
	on_two_left_to_right_line:   app.root.transition.direction = 'right'
	on_two_right_to_left_line:  app.root.transition.direction = 'left'
	on_two_down_to_up_line:  app.root.transition.direction = 'up'
# Layout the Screen Manager
<CoffeeScreenManager>:
	id: manager
	MenuScreen:
		id:menu	
	CoffeeScreen:
		id:coffee
		cup_size: control.size_text
		h2o_ftemp:control.set_ftemp
		h2o_ctemp:control.set_ctemp
		pod_select:control.pod_text
	ControlScreen:
		id:control
		
# Layout the Menu screen
<MenuScreen>:
	name: 'menu'

	BoxLayout:
		orientation: 'vertical'
		Label:
			text:'Welcome to the Menu!'
			font_size:50
		BoxLayout:
			
			Button:
				text:'Coffee Maker'
				font_size:30
				on_release:app.root.current ='coffee'

# Layout the NCP screen		

<CoffeeScreen>:
	name:'coffee'
	Runner: 
		on_two_down_to_up_line: app.root.current = 'menu'
		on_two_right_to_left_line: app.root.current = 'control'
		
	BoxLayout:
		orientation: 'vertical'
		Label: 
			text: 'Coffee Status'
			font_size:45
		
		GridLayout:
			rows:2
			cols:6
			BoxLayout:
				orientation: 'vertical'
				Label:
					text:'Water level'
					font_size:30
				Light_indicator:
					id:water_lv_lights
					num:3
					color1:'red'
					color2:'green'
					color3:'red'
					pos_l1: 60,40
					pos_l2: 135,40
					pos_l3: 210,40
					setting_on: False
					label_on:True
					l1_label:"Under Min"
					l3_label:"Over Max"
					bol2:True
					size_lights:40,40

			BoxLayout:
				orientation: 'vertical'
				Label:
					text:'Water Temp'
					font_size:30
			
				BoxLayout:
					Label:
						id:water_ftemp_disp
						text: root.h2o_ftemp +u'\xb0 '+'F'
					Label:
						id:water_ctemp_disp
						text: root.h2o_ctemp +u'\xb0 '+'C'

			BoxLayout:
				orientation: 'vertical'
				Label:
					text:'Altitude Mode'
					font_size:30
				Light_indicator:
					id:altitude_light
					num:1
					color1:'green'
					pos_l1: 135,40
					setting_on: False
					size_lights:40,40

			BoxLayout:
				orientation: 'vertical'
				Label:
					text:'Air Pump'
					font_size:30
				Light_indicator:
					id:air_pump_light
					num:1
					color1:'green'
					pos_l1: 135,40
					setting_on: False
					size_lights:40,40
			BoxLayout:
				orientation: 'vertical'
				Label:
					text:'Water Pump'
					font_size:30
				Light_indicator:
					id:water_pump_light
					num:1
					color1:'green'
					pos_l1: 135,40
					setting_on: False
					
					size_lights:40,40
			BoxLayout:
				orientation: 'vertical'
				Label:
					text:'Water Pumping Volume'
					font_size:30
				Label:
					id: water_vol
					text:root.cup_size

			BoxLayout:
				orientation: 'vertical'
				Label:
					text:'Pod Door'
					font_size:30
				Light_indicator:
					id:pod_door_light
					num:1
					color1:'red'
					pos_l1: 135,40
					setting_on: False
					size_lights:40,40
					bol1:True
			BoxLayout:
				orientation: 'vertical'
				Label:
					text:'Pod Present?'
					font_size:30
				Light_indicator:
					id:pod_light
					num:1
					color1:'red'
					pos_l1: 135,40
					setting_on: False
					size_lights:40,40
					bol1:True
			BoxLayout:
				orientation: 'vertical'
				Label:
					text:'Pod Color'
					font_size:30
				Label:
					id:pod_color
					text: root.pod_select

			BoxLayout:
				orientation: 'vertical'
				Label:
					text:'Carafe Present?'
					font_size:30
				Light_indicator:
					id:carafe_light
					num:1
					color1:'green'
					pos_l1: 135,40
					setting_on: False
					size_lights:40,40
					bol1:True
			BoxLayout:
				orientation: 'vertical'
				Label:
					text:'LED Status'
					font_size:30
				Light_indicator:
					id:led_light
					num:1
					color1:'green'
					pos_l1: 135,40
					setting_on: False
					label_on:False
					size_lights:40,40					

			BoxLayout:
				orientation: 'vertical'
				Label:
					text:'Home Sensor'
					font_size:30
				Light_indicator:
					id:home_sensor
					num:1
					color1:'green'
					pos_l1: 135,40
					setting_on: False
					size_lights:40,40


			
		BoxLayout:
			BoxLayout:
				Button:
					size_hint: None, None
					size: 200,100
					text: 'Brew!'
					font_size: 30
				Button:
					size_hint: None, None
					size: 200,100
					text: 'Stop!'
					font_size: 30
					canvas:
						Color:
							rgba: 1,0,0,0.4
						Rectangle:
							pos:self.pos
							size: self.size


<ControlScreen>:
	name:'control'
	Runner: 
		on_two_down_to_up_line: app.root.current = 'menu'
		on_two_left_to_right_line: app.root.current = 'coffee'

	BoxLayout:
		orientation: 'vertical'
		BoxLayout:
			size_hint: 1,0.5
			Label: 
				text: 'Coffee Control'
				font_size:45
		
		GridLayout:
			rows:2
			cols:6
			BoxLayout:
				orientation: 'vertical'
				Label:
					text:'Water level'
					font_size:30
				BoxLayout:
					Label:
						text:""
					Knob:
						id:water_lv_knob
						size: 100, 100
						min: 0
						max: 100
						step: 1
						value: 0  # Default position of knob.
						knobimg_source: "/home/nagato/.kivy/garden/garden.knob/img/knob_metal.png"  # Knob texture
						show_label: True  # Show central label
						show_marker: False  # Do not show surrounding marker
					Label:
						text:""
				BoxLayout:
					Label:
						text:str(water_lv_knob.value)

			BoxLayout:
				orientation: 'vertical'
				Label:
					text:'Water Temp'
					font_size:30
				BoxLayout:
					orientation:'vertical'
					Label:
						id:my_temp
						text: root.set_ftemp +u'\xb0 '+'F'
					BoxLayout:
						Label:
							text:""
						Button:
							size_hint:None,None
							size:100,100
							text:'-'
							on_release:root.decrease_temp()
						Button:
							size_hint:None,None
							size:100,100
							text:'+'
							on_release:root.increase_temp()
						Label:
							text:""
						
			BoxLayout:
				orientation: 'vertical'
				Label:
					text:'Altitude Mode'
					font_size:30
				BoxLayout:
					Label:
						text:""
					Button:
						id:alt_mode_on
						size_hint:None,None
						size:100,100
						text:"On"
						on_release:root.alt_mode_on()
					Button:
						id:alt_mode_off
						size_hint:None,None
						size:100,100
						text:"Off"
						on_release:root.alt_mode_off()
					Label:
						text:""
			BoxLayout:
				orientation: 'vertical'
				Label:
					text:'Air Pump'
					font_size:30
				BoxLayout:
					Label:
						text:""
					Button:
						id:air_pump_on
						size_hint:None,None
						size:100,100
						text:"On"
						on_release:root.turn_air_on()
					Button:
						id:air_pump_off
						size_hint:None,None
						size:100,100
						text:"Off"
						on_release:root.turn_air_off()
					Label:
						text:""
			BoxLayout:
				orientation: 'vertical'
				Label:
					text:'Water Pump'
					font_size:30
				BoxLayout:
					Label:
						text:""
					Button:
						id:water_pump_on
						size_hint:None,None
						size:100,100
						text:"On"
						on_release:root.turn_water_on()
					Button:
						id:water_pump_off
						size_hint:None,None
						size:100,100
						text:"Off"
						on_release:root.turn_water_off()
					Label:
						text:""
			BoxLayout:
				orientation: 'vertical'
				Label:
					text:'Water Pumping Volume'
					font_size:30
				BoxLayout:
					Label:
						text:""
					Spinner:
						id:sizes
						size_hint:None,None
						size:150,100
						text: "4 oz"
						values: '4 oz','6 oz','8 oz', '10 oz', '12 oz'
						#on_release:root.disp_size()
					Label:
						text:""

			BoxLayout:
				orientation: 'vertical'
				Label:
					text:'Pod Door'
					font_size:30
				BoxLayout:
					Label:
						text:""
					Button:
						id:pod_door_open
						size_hint:None,None
						size:100,100
						text:"Open"
						on_release:root.open_door()
					Button:
						id:pod_door_closed
						size_hint:None,None
						size:100,100
						text:"Closed"
						on_release:root.close_door()
					Label:
						text:""
			BoxLayout:
				orientation: 'vertical'
				Label:
					text:'Pod Present?'
					font_size:30
				BoxLayout:
					Label:
						text:""
					Button:
						id:pod_present
						size_hint:None,None
						size:100,100
						text:"Present"
						on_release:root.insert_pod()
					Button:
						id:pod_missing
						size_hint:None,None
						size:100,100
						text:"Missing"
						on_release:root.remove_pod()
					Label:
						text:""
			BoxLayout:
				orientation: 'vertical'
				Label:
					text:'Pod Color'
					font_size:30
				BoxLayout:
					Label:
						text:""
					Spinner:
						id:pod_options
						size_hint:None,None
						size:150,100
						text: "Blue"
						values: 'Blue','Green','Orange', 'White', 'Black'
						#on_release:root.disp_size()
					Label:
						text:""

			BoxLayout:
				orientation: 'vertical'
				Label:
					text:'Carafe Present?'
					font_size:30
				BoxLayout:
					Label:
						text:""
					Button:
						id:carafe_present
						size_hint:None,None
						size:100,100
						text:"Present"
						on_release:root.insert_carafe()
					Button:
						id:carafe_missing
						size_hint:None,None
						size:100,100
						text:"Missing"
						on_release:root.remove_carafe()
					Label:
						text:""
			BoxLayout:
				orientation: 'vertical'
				Label:
					text:'LED Status'
					font_size:30
				BoxLayout:

					Button:
						id:led_off
						size_hint:None,None
						size:100,100
						text:"Off"
						on_release:root.LED_off()
					Button:
						id:led_flash
						size_hint:None,None
						size:100,100
						text:"Flashing"	
						on_release:root.LED_flash()
					Button:
						id:led_on
						size_hint:None,None
						size:100,100
						text:"On"
						on_release:root.LED_on()				

			BoxLayout:
				orientation: 'vertical'
				Label:
					text:'Home Sensor'
					font_size:30
				BoxLayout:
					Label:
						text:""
					Button:
						id:home_on
						size_hint:None,None
						size:100,100
						text:"On"
						on_release:root.home_on()
					Button:
						id:home_off
						size_hint:None,None
						size:100,100
						text:"Off"
						on_release:root.home_off()
					Label:
						text:""


			


